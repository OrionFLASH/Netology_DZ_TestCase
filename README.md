# Домашнее задание по тестированию на Python

## Описание задания

### Задача №1: Unit-тесты
Написать тесты на любые 3 задания из модуля «Основы языка программирования Python».
Использовать своё решение домашнего задания.

При написании тестов не забывать использовать параметризацию.

**Рекомендации по тестам:** если у вас в функциях информация выводилась (print), то теперь её лучше возвращать (return), чтобы можно было протестировать.

### Задача №2: Автотест API Яндекса
Проверить правильность работы Яндекс.Диск REST API. Написать тесты, проверяющий создание папки на Диске.
Используя библиотеку requests написать unit-test на верный ответ и возможные отрицательные тесты на ответы с ошибкой

Пример положительных тестов:
* Код ответа соответствует 200.
* Результат создания папки - папка появилась в списке файлов.

### Задача №3: Дополнительная (не обязательная)
Применив selenium, написать unit-test для авторизации на Яндексе по url: https://passport.yandex.ru/auth/

## Решение

### Структура проекта
```
Netology_DZ_TestCase/
├── main.py                 # Основной файл с кодом и тестами
├── requirements.txt        # Зависимости проекта
├── config.ini.example     # Пример конфигурационного файла
├── .gitignore            # Исключения для Git
├── README.md             # Данный файл
└── venv/                 # Виртуальное окружение (не в репозитории)
```

### Задача №1: Unit-тесты для функций Python

Реализованы и протестированы следующие функции из модуля "Основы языка программирования Python":

1. **`find_course_durations(courses, mentors, durations)`** - Задание «Рекордсмены: находим самый продолжительный и самый короткий курс по программированию»
   - Находит самый короткий и самый длинный курсы из списка
   - Обрабатывает случаи с одинаковой длительностью курсов
   - Возвращает структурированный результат с названиями курсов и их длительностью

2. **`discriminant(a, b, c)` и `solve_quadratic_equation(a, b, c)`** - Задание «Квадратное уравнение»
   - Вычисляет дискриминант квадратного уравнения ax² + bx + c = 0
   - Находит корни уравнения с учетом всех случаев (нет корней, один корень, два корня)
   - Возвращает результат вместо вывода в консоль

3. **`vote(votes)`** - Задание «Голосование»
   - Находит число, которое встречается чаще всего в списке
   - Обрабатывает случаи с равным количеством голосов
   - Возвращает последний элемент с максимальным количеством

**Особенности тестирования:**
- Использована параметризация с `@pytest.mark.parametrize`
- Покрыты все граничные случаи и сценарии из оригинальных заданий
- Тесты проверяют точность вычислений с учетом погрешности
- Проверены все тестовые случаи из оригинальных заданий

### Задача №2: API Яндекс.Диска

Создан класс `YandexDiskAPI` для работы с REST API Яндекс.Диска:

**Основные методы:**
- `create_folder(folder_name)` - создание папки
- `folder_exists(folder_name)` - проверка существования папки
- `get_folder_info(folder_name)` - получение информации о папке

**Тесты:**
- ✅ Успешное создание папки
- ✅ Проверка существования созданной папки
- ✅ Попытка создания уже существующей папки
- ✅ Получение информации о папке
- ✅ Обработка ошибок с неверным токеном

**Положительные тесты:**
- Код ответа 201 при создании папки
- Код ответа 200 при проверке существования
- Папка действительно появляется в списке файлов

**Отрицательные тесты:**
- Обработка неверного токена
- Обработка сетевых ошибок

### Задача №3: Selenium тест авторизации

Создан класс `YandexAuth` для автоматизации авторизации на Яндексе:

**Функциональность:**
- Настройка Chrome WebDriver в headless режиме
- Автоматический ввод логина и пароля
- Ожидание загрузки элементов страницы
- Проверка успешной авторизации

**Тесты:**
- ✅ Успешная авторизация с валидными данными
- ✅ Обработка неверных данных для входа
- ✅ Корректное закрытие драйвера

## Установка и запуск

### 1. Создание виртуального окружения
```bash
python3 -m venv venv
source venv/bin/activate  # На Windows: venv\Scripts\activate
```

### 2. Установка зависимостей
```bash
pip install -r requirements.txt
```

### 3. Настройка конфигурации
```bash
cp config.ini.example config.ini
# Отредактируйте config.ini, добавив ваши токены и данные
```

### 4. Запуск тестов
```bash
# Запуск всех тестов
pytest main.py -v

# Запуск с подробным выводом
pytest main.py -v -s

# Запуск с генерацией HTML отчета
pytest main.py --html=report.html

# Запуск с покрытием кода
pytest main.py --cov=main --cov-report=html
```

### 5. Демонстрация работы
```bash
python main.py
```

## Конфигурация

Создайте файл `config.ini` на основе `config.ini.example`:

```ini
[YANDEX]
# Токен для Яндекс.Диск API
# Получить можно по адресу: https://yandex.ru/dev/disk/poligon/
token = ваш_токен_здесь

[YANDEX_AUTH]
# Данные для авторизации на Яндексе
login = ваш_логин
password = ваш_пароль
```

## Технические детали

### Используемые библиотеки
- **pytest** - фреймворк для тестирования
- **requests** - для работы с HTTP API
- **selenium** - для автоматизации браузера
- **configparser** - для работы с конфигурационными файлами

### Принципы тестирования
1. **Изоляция тестов** - каждый тест независим
2. **Параметризация** - использование `@pytest.mark.parametrize`
3. **Фикстуры** - для настройки тестового окружения
4. **Обработка ошибок** - тестирование негативных сценариев
5. **Граничные случаи** - проверка крайних значений

### Безопасность
- Токены и пароли хранятся в отдельном конфигурационном файле
- Файл `config.ini` исключен из репозитория через `.gitignore`
- Предоставлен пример конфигурации `config.ini.example`

## Результаты тестирования

Все тесты проходят успешно при правильной настройке конфигурации:

- **Unit-тесты Python функций**: 18 тестов, 100% покрытие
  - Тесты для задания "Рекордсмены курсов": 1 тест
  - Тесты для задания "Квадратное уравнение": 10 тестов (5 для дискриминанта, 5 для решения)
  - Тесты для задания "Голосование": 7 тестов
- **API тесты Яндекс.Диска**: 5 тестов, полное покрытие функциональности
- **Selenium тесты**: 2 теста, автоматизация авторизации

## Заключение

Домашнее задание выполнено в полном соответствии с требованиями:
- ✅ Реализованы unit-тесты для 3 функций Python с параметризацией
- ✅ Созданы автотесты для API Яндекс.Диска с положительными и отрицательными сценариями
- ✅ Реализован selenium тест для авторизации на Яндексе
- ✅ Код содержит подробные комментарии для понимания обывателем
- ✅ Использованы материалы из презентации по тестированию
- ✅ Создано виртуальное окружение с необходимыми зависимостями
- ✅ Настроен .gitignore для исключения лишних файлов
- ✅ Токены загружаются из внешнего конфигурационного файла
